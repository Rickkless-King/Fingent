# Fingent
**Fingent** æ˜¯ä¸€ä¸ªåŸºäºLangGraph æ„å»ºçš„è‡ªåŠ¨åŒ–å®è§‚é‡‘èåˆ†æç³»ç»Ÿï¼Œå®ç°ä»å®è§‚ç»æµåˆ°å¾®è§‚èµ„äº§çš„ Top-Downåˆ†ææµç¨‹ã€‚

---

## é¡¹ç›®å®šä½

### æ ¸å¿ƒä»·å€¼

1. **è‡ªåŠ¨åŒ– Top-Down åˆ†æ**ï¼šå®è§‚ç»æµ â†’ è·¨èµ„äº§è”åŠ¨ â†’ å¸‚åœºæƒ…ç»ª â†’ ç»¼åˆæŠ¥å‘Š
2. **ä¿¡å·æ ‡å‡†åŒ–**ï¼šæ¯ä¸ªåˆ†æèŠ‚ç‚¹äº§å‡ºç»Ÿä¸€æ ¼å¼çš„ Signalï¼Œä¾¿äºè§„åˆ™å¼•æ“å¤„ç†
3. **æ’ä»¶åŒ–æ¶æ„**ï¼šæ•°æ®æºã€åˆ†æèŠ‚ç‚¹ã€å‘Šè­¦è§„åˆ™å¯ç‹¬ç«‹å¢åˆ 
4. **å·¥ç¨‹å¯ç»´æŠ¤**ï¼šä¸æ˜¯ä¸€æ¬¡æ€§ demoï¼Œè€Œæ˜¯èƒ½æŒç»­è¿­ä»£çš„ç³»ç»Ÿ

### è§£å†³çš„é—®é¢˜

- æ‰‹åŠ¨ç›¯ç›˜å¤ªç´¯ï¼Œä¿¡æ¯åˆ†æ•£åœ¨å¤šä¸ªå¹³å°
- å®è§‚æ•°æ®ï¼ˆåˆ©ç‡ã€CPIï¼‰ã€å¸‚åœºæ•°æ®ï¼ˆBTCã€é»„é‡‘ã€ç¾è‚¡ï¼‰ã€æƒ…ç»ªæ•°æ®éœ€è¦æ•´åˆåˆ†æ
- éœ€è¦ç³»ç»Ÿè‡ªåŠ¨å¸®ä½ "è¿ç‚¹æˆçº¿"ï¼Œç»™å‡ºç»“æ„åŒ–åˆ¤æ–­

---

## ç³»ç»Ÿæ¶æ„

### æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®æºå±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    FRED     â”‚   Finnhub   â”‚ AlphaVantageâ”‚  Polymarket(å¯é€‰)    â”‚
â”‚  (å®è§‚ç»æµ)  â”‚  (è¡Œæƒ…/æ–°é—») â”‚  (æ–°é—»æƒ…ç»ª)  â”‚ (é¢„æµ‹å¸‚åœº+CLOB)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚                  â”‚
       â–¼             â–¼             â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Provider é€‚é…å±‚                             â”‚
â”‚   FREDProvider / FinnhubProvider / AlphaVantageProvider / ...   â”‚
â”‚         (ç»Ÿä¸€æ¥å£ã€è¶…æ—¶é‡è¯•ã€ç¼“å­˜ã€é”™è¯¯å¤„ç†)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                    â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LangGraph å·¥ä½œæµ               â”‚    â”‚     Arbitrage Engine       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚Bootstrap â”‚â†’ â”‚  Macro   â”‚â†’ ...        â”‚    â”‚  â”‚  News Trigger      â”‚    â”‚
â”‚  â”‚  Node    â”‚  â”‚ Auditor  â”‚             â”‚    â”‚  â”‚  (Finnhub Keywords)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                      â†“                  â”‚    â”‚            â–¼               â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚           â”‚   Synthesize    â”‚           â”‚    â”‚  â”‚ Term Structure     â”‚    â”‚
â”‚           â”‚   & Alert Node  â”‚           â”‚    â”‚  â”‚ Strategy           â”‚    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚            â–¼               â”‚
                     â”‚                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                     â”‚                         â”‚  â”‚ Risk Manager       â”‚    â”‚
                     â”‚                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                     â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼             â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Telegram â”‚  â”‚ Streamlitâ”‚      â”‚  SQLite  â”‚
        â”‚   å‘Šè­¦    â”‚  â”‚   é¢æ¿   â”‚      â”‚  å­˜æ¡£    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸‰å±‚æ¶æ„

| å±‚ | ç›®å½• | èŒè´£ | ä¾èµ–å…³ç³» |
|---|------|-----|---------|
| **Core** | `fingent/core/` | å·¥ç¨‹åº•åº§ï¼šé…ç½®ã€æ—¥å¿—ã€HTTPã€ç¼“å­˜ | æ— å¤–éƒ¨ä¾èµ– |
| **Domain** | `fingent/domain/` | ä¸šåŠ¡æ¨¡å‹ï¼šä¿¡å·ã€å‘Šè­¦ã€æŠ¥å‘Šå®šä¹‰ | åªä¾èµ– Core |
| **Infra** | `fingent/providers/` | æ•°æ®é€‚é…ï¼šæ¯ä¸ª API ä¸€ä¸ªå°è£… | ä¾èµ– Core + Domain |
| **App** | `fingent/nodes/` `graph/` `services/` | ä¸šåŠ¡ç¼–æ’ï¼šLangGraph èŠ‚ç‚¹ã€å·¥ä½œæµ | ä¾èµ–ä¸Šé¢æ‰€æœ‰ |

### è®¾è®¡åŸåˆ™

1. **State å¿…é¡» JSON-serializable**ï¼šä½¿ç”¨ TypedDict + dict/listï¼Œä¸åœ¨ state ä¸­ä½¿ç”¨è‡ªå®šä¹‰ç±»
2. **Alert åˆ¤å®šå¿…é¡» rule-based**ï¼šç”± config.yaml ä¸­çš„è§„åˆ™é©±åŠ¨ï¼ŒLLM åªè´Ÿè´£æŠ¥å‘Šæ–‡å­—ç”Ÿæˆ
3. **Provider å¿…é¡»å®¹é”™**ï¼štimeout/retry/cache + å¤±è´¥é™çº§ï¼Œå•ä¸ªæ•°æ®æºæŒ‚æ‰ä¸å½±å“æ•´ä½“
4. **Polymarket å¯é€‰**ï¼šä¸å¯ç”¨æ—¶é™é»˜è·³è¿‡ï¼Œä¸é˜»å¡ä¸»æµç¨‹

---

## ç›®å½•ç»“æ„

```
Fingent/
â”œâ”€â”€ pyproject.toml              # é¡¹ç›®é…ç½® + ä¾èµ–
â”œâ”€â”€ .env                        # å¯†é’¥é…ç½®ï¼ˆä¸æäº¤ï¼‰
â”œâ”€â”€ .env.example                # å¯†é’¥æ¨¡æ¿
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ Dockerfile                  # å®¹å™¨åŒ–
â”œâ”€â”€ docker-compose.yml          # æœ¬åœ°å®¹å™¨æµ‹è¯•
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ config.yaml             # ä¸šåŠ¡é…ç½®ï¼ˆæ•°æ®æºã€å‘Šè­¦è§„åˆ™ï¼‰
â”‚   â””â”€â”€ logging.yaml            # æ—¥å¿—é…ç½®
â”‚
â”œâ”€â”€ fingent/                    # ä¸»åŒ…
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # å·¥ç¨‹åº•åº§
â”‚   â”‚   â”œâ”€â”€ config.py           # é…ç½®åŠ è½½ï¼ˆæ”¯æŒ .env / AWS Secretsï¼‰
â”‚   â”‚   â”œâ”€â”€ logging.py          # æ—¥å¿—ï¼ˆæœ¬åœ°äººç±»å¯è¯» / äº‘ç«¯JSONï¼‰
â”‚   â”‚   â”œâ”€â”€ errors.py           # ç»Ÿä¸€å¼‚å¸¸å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ http.py             # HTTP å°è£…ï¼ˆè¶…æ—¶/é‡è¯•/é™æµï¼‰
â”‚   â”‚   â”œâ”€â”€ cache.py            # TTL ç¼“å­˜
â”‚   â”‚   â””â”€â”€ timeutil.py         # æ—¶é—´å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                 # ä¸šåŠ¡æ¨¡å‹ï¼ˆçº¯ Pythonï¼Œä¸ç¢° HTTPï¼‰
â”‚   â”‚   â”œâ”€â”€ models.py           # MacroIndicator, PriceBar, NewsItem
â”‚   â”‚   â”œâ”€â”€ signals.py          # Signal å®šä¹‰ + èšåˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ alerts.py           # Alert å®šä¹‰ + RuleEngine
â”‚   â”‚   â””â”€â”€ report.py           # Report ç»“æ„
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/              # æ•°æ®é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ base.py             # BaseProvider / OptionalProvider
â”‚   â”‚   â”œâ”€â”€ fred.py             # FRED å®è§‚æ•°æ®
â”‚   â”‚   â”œâ”€â”€ finnhub.py          # Finnhub è¡Œæƒ…/æ–°é—»
â”‚   â”‚   â”œâ”€â”€ alphavantage.py     # AlphaVantage æ–°é—»æƒ…ç»ª
â”‚   â”‚   â”œâ”€â”€ okx.py              # OKX Crypto è¡Œæƒ…
â”‚   â”‚   â””â”€â”€ polymarket.py       # Polymarketï¼ˆå¯é€‰ï¼Œå« CLOB æ”¯æŒï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ arb/                    # Polymarket å¥—åˆ©æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ engine.py           # å¥—åˆ©å¼•æ“ï¼ˆåè°ƒå…¨æµç¨‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ strategy.py         # æœŸé™ç»“æ„ç­–ç•¥
â”‚   â”‚   â””â”€â”€ risk.py             # é£é™©æ§åˆ¶
â”‚   â”‚
â”‚   â”œâ”€â”€ nodes/                  # LangGraph èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ base.py             # BaseNode æŠ½è±¡ç±»
â”‚   â”‚   â”œâ”€â”€ bootstrap.py        # åˆå§‹åŒ–èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ macro_auditor.py    # å®è§‚åˆ†æèŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ cross_asset.py      # è·¨èµ„äº§åˆ†æèŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ news_impact.py      # æ–°é—»å½±å“èŠ‚ç‚¹
â”‚   â”‚   â””â”€â”€ synthesize_alert.py # ç»¼åˆ+å‘Šè­¦èŠ‚ç‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ graph/                  # å·¥ä½œæµè£…é…
â”‚   â”‚   â”œâ”€â”€ state.py            # GraphState å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ registry.py         # Provider/Node æ³¨å†Œ
â”‚   â”‚   â””â”€â”€ builder.py          # å·¥ä½œæµæ„å»ºå™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # æ¨ªåˆ‡èƒ½åŠ›
â”‚   â”‚   â”œâ”€â”€ llm.py              # LLM å°è£…ï¼ˆDeepSeek/Qwenï¼‰
â”‚   â”‚   â”œâ”€â”€ telegram.py         # Telegram æ¨é€
â”‚   â”‚   â”œâ”€â”€ persistence.py      # æ•°æ®æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ scheduler.py        # å®šæ—¶ä»»åŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ streamlit_app.py    # Streamlit é¢æ¿
â”‚   â”‚
â”‚   â””â”€â”€ cli/
â”‚       â””â”€â”€ main.py             # CLI å…¥å£
â”‚
â””â”€â”€ tests/                      # æµ‹è¯•
    â”œâ”€â”€ test_providers.py
    â””â”€â”€ test_nodes.py
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### GraphState

å·¥ä½œæµçš„"è®°å¿†"ï¼Œè´¯ç©¿æ‰€æœ‰èŠ‚ç‚¹ï¼š

```python
class GraphState(TypedDict):
    # å…ƒä¿¡æ¯
    run_id: str                 # æœ¬æ¬¡è¿è¡Œå”¯ä¸€ID
    asof: str                   # åˆ†ææ—¶ç‚¹ (ISO timestamp)

    # å„èŠ‚ç‚¹äº§å‡ºçš„åŸå§‹æ•°æ®
    macro_data: dict            # FRED å®è§‚æŒ‡æ ‡
    market_data: dict           # è¡Œæƒ…æ•°æ®
    news_data: list             # æ–°é—»åˆ—è¡¨
    sentiment_data: dict        # Polymarket æ•°æ®ï¼ˆå¯é€‰ï¼‰

    # æ ‡å‡†åŒ–ä¿¡å·ï¼ˆå…³é”®ï¼ï¼‰
    signals: list[dict]         # æ‰€æœ‰èŠ‚ç‚¹äº§å‡ºçš„ä¿¡å·

    # è¾“å‡º
    alerts: list[dict]          # è§¦å‘çš„å‘Šè­¦
    report: dict                # æœ€ç»ˆæŠ¥å‘Š

    # è¿ç»´
    errors: list[dict]          # é”™è¯¯è®°å½•
```

### Signalï¼ˆä¿¡å·ï¼‰

æ¯ä¸ªåˆ†æèŠ‚ç‚¹çš„æ ‡å‡†åŒ–è¾“å‡ºï¼š

```python
signal = {
    "id": "macro_auditor_hawkish_bias_run_xxx",
    "name": "hawkish_bias",
    "direction": "hawkish",
    "score": 0.7,              # -1 åˆ° 1
    "confidence": 0.8,         # 0 åˆ° 1
    "source_node": "macro_auditor",
    "evidence": {"fed_rate": 5.25, "cpi_yoy": 3.2},
    "timestamp": "2026-01-24T07:00:00Z"
}
```

### Alertï¼ˆå‘Šè­¦ï¼‰

ç”±è§„åˆ™å¼•æ“äº§ç”Ÿï¼Œä¸ä¾èµ– LLMï¼š

```python
alert = {
    "id": "alert_btc_crash_run_xxx",
    "rule_name": "btc_crash",
    "title": "BTC 24h å¤§è·Œ",
    "message": "BTC 24å°æ—¶è·Œå¹… -10.5%ï¼Œè¶…è¿‡ -8% é˜ˆå€¼",
    "severity": "high",
    "current_value": -0.105,
    "threshold": -0.08
}
```

---

## MVP èŠ‚ç‚¹æ¸…å•

| èŠ‚ç‚¹ | æ•°æ®æº | è¾“å‡ºä¿¡å· |
|------|-------|---------|
| **BootstrapNode** | - | åˆå§‹åŒ– run_idã€timestamp |
| **MacroAuditorNode** | FRED | hawkish_bias, inflation_rising, labor_strong |
| **CrossAssetNode** | Finnhub, OKX | risk_on, risk_off, yield_curve_inversion |
| **NewsImpactNode** | AlphaVantage | sentiment_bullish, sentiment_bearish |
| **SynthesizeAlertNode** | æ‰€æœ‰ signals | ç”Ÿæˆ alerts + report |

---

## LLM ä½¿ç”¨ç­–ç•¥

| åœºæ™¯ | ä½¿ç”¨ LLM | ä¸ä½¿ç”¨ LLM |
|------|---------|-----------|
| æ–°é—»æ‘˜è¦ | ç”Ÿæˆç®€æŠ¥ | ç”¨ API è‡ªå¸¦ sentiment_label |
| å‘Šè­¦åˆ¤å®š | âŒ | è§„åˆ™å¼•æ“ï¼ˆconfig.yamlï¼‰ |
| æŠ¥å‘Šç”Ÿæˆ | äººè¯æ€»ç»“ | ç»“æ„åŒ–æ•°æ®è¾“å‡º |

**å…³é”®åŸåˆ™**ï¼šLLM åªåš"é”¦ä¸Šæ·»èŠ±"ï¼Œå…³é—­ LLM ç³»ç»Ÿä»èƒ½æ­£å¸¸äº§å‡ºç»“æ„åŒ–æŠ¥å‘Šã€‚

---

## æ•°æ®æºä¼˜å…ˆçº§

```yaml
providers:
  quote:
    us_equity: finnhub      # ç¾è‚¡
    crypto: okx             # åŠ å¯†è´§å¸
    fallback: yfinance      # å¤‡ç”¨

  news:
    primary: alphavantage   # æ–°é—»æƒ…ç»ª
    fallback: finnhub

  macro:
    primary: fred           # å®è§‚ç»æµ

  sentiment:
    polymarket:
      enabled: false        # å¯é€‰ï¼Œå¤±è´¥ä¸å½±å“ä¸»æµç¨‹
```

---

## éƒ¨ç½²æ¶æ„

### Phase 1: æœ¬åœ°å¼€å‘
```
æœ¬åœ°å¼€å‘æœº
.env + SQLite + APScheduler
python -m fingent.cli.main --once
```

### Phase 2: EC2 éƒ¨ç½²
```
EC2 (t3.small)
Docker å®¹å™¨
Secrets Manager + S3 + CloudWatch
```

### Phase 3: Serverlessï¼ˆå¯é€‰ï¼‰
```
EventBridge (æ¯å¤© 7:00)
    â†“
Lambda (è·‘ pipeline)
    â†“
S3 (å­˜æŠ¥å‘Š) + SNS (å‘å‘Šè­¦)
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac

# å®‰è£…é¡¹ç›®
pip install -e ".[dev]"
```

### 2. é…ç½®å¯†é’¥

å¤åˆ¶ `.env.example` ä¸º `.env`ï¼Œå¡«å…¥ä½ çš„ API keysï¼š

```bash
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥å¯†é’¥
```

### 3. è¿è¡Œ

```bash
# å•æ¬¡è¿è¡Œ
python -m fingent.cli.main --once

# å®šæ—¶è¿è¡Œ
python -m fingent.cli.main --scheduled

# å¯åŠ¨ Streamlit é¢æ¿
streamlit run fingent/ui/streamlit_app.py
```

---

## Dashboard ä½¿ç”¨è¯´æ˜

### æ™¨æŠ¥é£æ ¼ç•Œé¢

Streamlit Dashboard é‡‡ç”¨ã€Œæ™¨æŠ¥/ç®€æŠ¥ã€é£æ ¼ï¼Œé¢å‘æ™®é€šæŠ•èµ„è€…è®¾è®¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Today's Market Brief                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [AI ç”Ÿæˆçš„å¸‚åœºåˆ†ææ‘˜è¦ï¼Œ3-5å¥è¯]             â”‚
â”‚  [âœ¨ Generate AI Analysis æŒ‰é’®]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Direction: ğŸŸ¢ BULLISH (+0.35)              â”‚
â”‚  Signals: 5  |  Alerts: 0  |  Errors: 0     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“° News (ç´§å‡‘åˆ—è¡¨ï¼Œå¯å±•å¼€)                   â”‚
â”‚  ğŸŸ¢ NVIDIA reports record earnings... (2h)  â”‚
â”‚  âšª Fed officials signal patience... (5h)   â”‚
â”‚  ğŸ”´ China tech stocks fall amid... (8h)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¹ Market Overview                         â”‚
â”‚  SPY: $582.30 (+0.8%)  QQQ: $510.20 (+1.2%) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°é—»æ˜¾ç¤º

æ–°é—»é‡‡ç”¨ç´§å‡‘çš„å¯å±•å¼€åˆ—è¡¨æ ¼å¼ï¼š
- **æ ‡é¢˜è¡Œ**: `ğŸŸ¢ æ ‡é¢˜ (æ—¶é—´)` - æƒ…ç»ªå›¾æ ‡ + æˆªæ–­æ ‡é¢˜ + å‘å¸ƒæ—¶é—´
- **æƒ…ç»ªå›¾æ ‡**: ğŸŸ¢ çœ‹æ¶¨ (>0.3) / ğŸ”´ çœ‹è·Œ (<-0.3) / âšª ä¸­æ€§
- **å±•å¼€è¯¦æƒ…**: ç‚¹å‡»å±•å¼€åæ˜¾ç¤ºæ¥æºã€æ‘˜è¦ã€åŸæ–‡é“¾æ¥

ç”¨æˆ·å¯ä»¥å¿«é€Ÿæ‰«ææ ‡é¢˜ï¼Œåªå±•å¼€é‡è¦çš„æ–°é—»ã€‚

### AI åˆ†æç”Ÿæˆ

ç‚¹å‡»ã€Œâœ¨ Generate AI Analysisã€æŒ‰é’®ï¼ŒLLM ä¼šç”Ÿæˆé€šä¿—æ˜“æ‡‚çš„å¸‚åœºåˆ†æï¼š

**LLM å†…ç½®ä¿¡å·è§£è¯»æŒ‡å—**ï¼š

| æœ¯è¯­ | é€šä¿—è§£é‡Š |
|------|---------|
| bullish | å¸‚åœºæƒ…ç»ªä¹è§‚ï¼Œé£é™©åå¥½ä¸Šå‡ |
| bearish | å¸‚åœºæƒ…ç»ªæ‚²è§‚ï¼Œé¿é™©æƒ…ç»ªä¸Šå‡ |
| hawkish | å¤®è¡Œå€¾å‘åŠ æ¯/æ”¶ç´§æ”¿ç­– |
| dovish | å¤®è¡Œå€¾å‘é™æ¯/å®½æ¾æ”¿ç­– |
| risk_on | æŠ•èµ„è€…æ„¿æ„æ‰¿æ‹…é£é™©ï¼Œèµ„é‡‘æµå‘è‚¡ç¥¨ |
| risk_off | æŠ•èµ„è€…è§„é¿é£é™©ï¼Œèµ„é‡‘æµå‘å›½å€ºå’Œé»„é‡‘ |

**è¯„åˆ†å«ä¹‰**ï¼š
- `+0.5 ä»¥ä¸Š`: å¼ºçœ‹æ¶¨ä¿¡å·
- `+0.2 ~ +0.5`: æ¸©å’Œçœ‹æ¶¨
- `-0.2 ~ +0.2`: ä¸­æ€§
- `-0.5 ~ -0.2`: æ¸©å’Œçœ‹è·Œ
- `-0.5 ä»¥ä¸‹`: å¼ºçœ‹è·Œä¿¡å·

LLM ä¼šå°†è¿™äº›æŠ€æœ¯æœ¯è¯­ç¿»è¯‘æˆæ™®é€šæŠ•èµ„è€…èƒ½ç†è§£çš„è¯­è¨€ï¼Œä¾‹å¦‚ï¼š
> "ä»Šæ—¥å¸‚åœºæ•´ä½“åå‘ä¹è§‚ã€‚ç¾è”å‚¨å®˜å‘˜è¡¨æ€åæ¸©å’Œï¼Œé€šèƒ€æ•°æ®ç•¥æœ‰å›è½ï¼Œèµ„é‡‘æ­£ä»é¿é™©èµ„äº§æµå‘é£é™©èµ„äº§ã€‚å€¼å¾—å…³æ³¨çš„æ˜¯é»„é‡‘ä»·æ ¼æœ‰æ‰€å›è°ƒï¼Œå»ºè®®æŒç»­å…³æ³¨ç§‘æŠ€è‚¡è¡¨ç°ã€‚"

---

## é…ç½®è¯´æ˜

### å‘Šè­¦è§„åˆ™ (config/config.yaml)

```yaml
alert_rules:
  - name: btc_crash
    description: "BTC 24h è·Œå¹…è¶… 8%"
    condition:
      metric: btc_24h_change
      operator: "<"
      threshold: -0.08
    severity: high

  - name: vix_spike
    description: "VIX è¶…è¿‡ 25"
    condition:
      metric: vix_level
      operator: ">"
      threshold: 25
    severity: high
```

### è®¡ç®—è§„åˆ™

```yaml
calculation_rules:
  # 24h å˜åŒ–è®¡ç®—æ–¹å¼ï¼ˆå†™æ­»ï¼Œé¿å…ä¸ä¸€è‡´ï¼‰
  change_24h: "last_close / close_24h_ago - 1"
  change_7d: "last_close / close_7d_ago - 1"

  # æ•°æ®ä¸è¶³æ—¶çš„å¤„ç†
  insufficient_data: "skip_with_warning"
```

---

## æ‰©å±•æŒ‡å—

### æ–°å¢æ•°æ®æº

1. åœ¨ `fingent/providers/` åˆ›å»ºæ–° Provider
2. ç»§æ‰¿ `BaseProvider` æˆ– `OptionalProvider`
3. å®ç° `healthcheck()` å’Œæ•°æ®è·å–æ–¹æ³•
4. åœ¨ `registry` æ³¨å†Œ

### æ–°å¢åˆ†æèŠ‚ç‚¹

1. åœ¨ `fingent/nodes/` åˆ›å»ºæ–° Node
2. ç»§æ‰¿ `BaseNode`
3. å®ç° `run(state)` æ–¹æ³•ï¼Œè¿”å› partial state update
4. åœ¨ `graph/builder.py` æ·»åŠ åˆ°å·¥ä½œæµ

### æ–°å¢å‘Šè­¦è§„åˆ™

åœ¨ `config/config.yaml` çš„ `alert_rules` ä¸­æ·»åŠ æ–°è§„åˆ™å³å¯ï¼Œæ— éœ€æ”¹ä»£ç ã€‚

---

## Polymarket å¥—åˆ©æ£€æµ‹ï¼ˆArbitrageï¼‰

### åŠŸèƒ½æ¦‚è¿°

Fingent é›†æˆäº† Polymarket æœŸé™ç»“æ„å¥—åˆ©æ£€æµ‹åŠŸèƒ½ï¼Œå¯ä»¥ï¼š

1. **æ–°é—»è§¦å‘**ï¼šç›‘å¬ Finnhub æ–°é—»ï¼Œå…³é”®è¯åŒ¹é…æ—¶è§¦å‘æ‰«æ
2. **å¸‚åœºå¬å›**ï¼šä» Polymarket Gamma API æœç´¢ç›¸å…³äº‹ä»¶/å¸‚åœº
3. **æœŸé™ç»“æ„æ£€æµ‹**ï¼šåŒä¸€äº‹ä»¶ä¸‹ä¸åŒåˆ°æœŸæ—¥çš„å¸‚åœºï¼Œæ£€æµ‹æ¦‚ç‡å˜åŠ¨ä¸åŒæ­¥
4. **é£é™©è¿‡æ»¤**ï¼šæˆäº¤é‡ã€ä»·å·®ã€æ·±åº¦ã€å†·å´æ—¶é—´ç­‰è¿‡æ»¤å™¨
5. **å¯è§†åŒ–**ï¼šStreamlit Dashboard çš„ Arbitrage é€‰é¡¹å¡

### æ ¸å¿ƒé€»è¾‘

**æœŸé™ç»“æ„å¥—åˆ© (Term Structure Arbitrage)**ï¼š

```
åŒä¸€äº‹ä»¶ï¼Œä¸åŒåˆ°æœŸæ—¥çš„å¸‚åœºï¼ˆå¦‚ 3æœˆåˆ°æœŸ vs 5æœˆåˆ°æœŸï¼‰
å½“çŸ­æœŸå¸‚åœºæ¦‚ç‡å‰§å˜ï¼Œä½†é•¿æœŸå¸‚åœºæœªåŒæ­¥å˜åŒ–æ—¶ï¼Œå¯èƒ½å­˜åœ¨å¥—åˆ©æœºä¼š

delta_short = current_mid(short) - p0(short)
delta_long = current_mid(long) - p0(long)

if abs(delta_short - delta_long) > threshold:
    â†’ æ£€æµ‹åˆ°æœŸé™ç»“æ„é”™ä½
```

### é…ç½®

åœ¨ `config/config.yaml` ä¸­é…ç½®ï¼š

```yaml
arbitrage:
  enabled: true  # å¯ç”¨å¥—åˆ©æ£€æµ‹

  # è§¦å‘å…³é”®è¯ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
  trigger_keywords:
    - "(H200|H100|NVIDIA|NVDA)"
    - "(Fed|CPI|inflation|rate cut)"
    - "(Trump|tariff)"

  # æœŸé™ç»“æ„ç­–ç•¥
  term_structure:
    delta_threshold: 0.05      # 5% å·®å€¼è§¦å‘
    trigger_window_minutes: 120

  # é£æ§å‚æ•°
  risk:
    min_volume_24h: 5000       # æœ€å°æˆäº¤é‡ $5000
    max_spread_bps: 300        # æœ€å¤§ä»·å·® 3%
    min_depth_usd: 1000        # æœ€å°æ·±åº¦ $1000
    cooldown_seconds: 900      # å†·å´ 15 åˆ†é’Ÿ
```

### ä½¿ç”¨æ–¹æ³•

**æ–¹æ³• 1ï¼šStreamlit Dashboard**

```bash
streamlit run fingent/ui/streamlit_app.py
# ç‚¹å‡» "Arbitrage" é€‰é¡¹å¡ â†’ "Scan Polymarket"
```

**æ–¹æ³• 2ï¼šä»£ç è°ƒç”¨**

```python
from fingent.arb.engine import ArbEngine

engine = ArbEngine()

# æ‰‹åŠ¨æ‰«æ
opportunities = engine.run_scan()

# æ–°é—»è§¦å‘æ‰«æ
opportunities = engine.process_news(
    headline="NVIDIA announces H200 sales to China",
    summary="...",
)

# å®Œæ•´æµç¨‹ï¼ˆå« Finnhub æ–°é—»ï¼‰
results = engine.run_full_pipeline(use_finnhub=True)
```

### æ•°æ®æ¨¡å‹

| æ¨¡å‹ | è¯´æ˜ |
|------|------|
| `PolymarketEvent` | äº‹ä»¶ï¼ˆåŒ…å«å¤šä¸ªå¸‚åœºï¼‰ |
| `PolymarketMarket` | å¸‚åœºï¼ˆå« CLOB token IDsã€tenor_daysï¼‰ |
| `PolymarketQuote` | è®¢å•ç°¿æŠ¥ä»·ï¼ˆbid/ask/mid/depth/spreadï¼‰ |
| `ArbSnapshot` | åˆå§‹ä»·æ ¼å¿«ç…§ï¼ˆP0ï¼Œç”¨äºè®¡ç®— deltaï¼‰ |
| `ArbOpportunity` | å¥—åˆ©æœºä¼šï¼ˆlegsã€edgeã€confidenceã€risk_flagsï¼‰ |

### æ³¨æ„äº‹é¡¹

- Polymarket API åœ¨æŸäº›åœ°åŒºå¯èƒ½æœ‰è®¿é—®é™åˆ¶
- å¥—åˆ©æ£€æµ‹éœ€è¦åŒä¸€äº‹ä»¶æœ‰ 2+ ä¸ªä¸åŒåˆ°æœŸçš„å¸‚åœº
- é»˜è®¤ä¸ºçº¸é¢äº¤æ˜“ï¼ˆPAPERï¼‰ï¼Œä¸è‡ªåŠ¨ä¸‹å•
- LLM ä»…ç”¨äºè§£é‡Šï¼Œä¸å‚ä¸å¥—åˆ©åˆ¤æ–­

---

## æŠ€æœ¯æ ˆ

- **Python 3.11+**
- **LangGraph** - å·¥ä½œæµç¼–æ’
- **Pydantic v2** - é…ç½®ç®¡ç†
- **httpx** - HTTP å®¢æˆ·ç«¯
- **CCXT** - åŠ å¯†è´§å¸äº¤æ˜“æ‰€ API
- **fredapi** - FRED æ•°æ®
- **finnhub-python** - Finnhub æ•°æ®
- **SQLAlchemy** - æ•°æ®åº“ ORM
- **APScheduler** - å®šæ—¶ä»»åŠ¡
- **Streamlit** - Web UI
- **Docker** - å®¹å™¨åŒ–

---

